{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"callback\"],\n  _excluded2 = [\"callback\"],\n  _excluded3 = [\"callback\"],\n  _excluded4 = [\"deviceId\", \"callback\"],\n  _excluded5 = [\"deviceId\", \"callback\"],\n  _excluded6 = [\"callback\"],\n  _excluded7 = [\"deviceId\"],\n  _excluded8 = [\"deviceId\"],\n  _excluded9 = [\"callback\"],\n  _excluded10 = [\"deviceId\"],\n  _excluded11 = [\"callback\"];\nimport { call, put, select, takeEvery } from 'redux-saga/effects';\nimport { api } from '@frontegg/rest-api';\nimport { actions } from '../reducer';\nimport { MFAStep } from './interfaces';\nimport { base64urlDecode, delay, publicKeyCredentialToJSON } from '../utils';\nimport { userDemo } from '../dummy';\nfunction* getMfaStateAfterEnroll(res) {\n  const {\n    step\n  } = yield select(state => state.auth.mfaState);\n  const mfaState = {\n    step: res.recoveryCode ? MFAStep.recoveryCode : step,\n    loading: false,\n    saving: false,\n    error: undefined,\n    recoveryCode: res == null ? void 0 : res.recoveryCode\n  };\n  return mfaState;\n}\nfunction* enrollMfa() {\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  try {\n    const {\n      qrCode\n    } = yield call(api.auth.enrollMfa);\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      qrCode\n    }));\n  } catch (e) {\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n  }\n}\nfunction* verifyMfa(_ref) {\n  let {\n      payload: {\n        callback\n      }\n    } = _ref,\n    payload = _objectWithoutPropertiesLoose(_ref.payload, _excluded);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  try {\n    const user = yield select(state => state.auth.user);\n    const data = yield call(api.auth.verifyMfa, payload);\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    const mfaState = yield getMfaStateAfterEnroll(data);\n    yield put(actions.setMfaState(_extends({}, mfaState, {\n      mfaDevices\n    })));\n    yield put(actions.setUser(_extends({}, user, {\n      mfaEnrolled: true\n    })));\n    callback == null ? void 0 : callback(mfaState.recoveryCode);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    callback == null ? void 0 : callback(null, e);\n  }\n}\nfunction* verifyMfaAfterForce(_ref2) {\n  let {\n      payload: {\n        callback\n      }\n    } = _ref2,\n    payload = _objectWithoutPropertiesLoose(_ref2.payload, _excluded2);\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n  try {\n    const user = yield call(api.auth.loginWithMfa, payload);\n    const mfaState = {\n      step: MFAStep.recoveryCode,\n      loading: false,\n      saving: false,\n      error: undefined\n    };\n    if (user != null && user.recoveryCode) {\n      mfaState.recoveryCode = user.recoveryCode;\n    }\n    yield put(actions.setMfaState(mfaState));\n    yield put(actions.setState({\n      user\n    }));\n    yield put(actions.loadTenants());\n    callback == null ? void 0 : callback(mfaState.recoveryCode);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      loading: false,\n      error: e.message\n    }));\n    callback == null ? void 0 : callback(null, e);\n  }\n}\nfunction disableMfa(_ref12) {\n  let {\n    payload\n  } = _ref12;\n  return function* () {\n    yield put(actions.setMfaState({\n      saving: true\n    }));\n    try {\n      var _payload$callback;\n      yield call(api.auth.disableMfa, payload);\n      const mfaDevices = yield call(api.auth.getMFADevices);\n      yield put(actions.setMfaState({\n        saving: false,\n        error: undefined,\n        mfaDevices\n      }));\n      (_payload$callback = payload.callback) == null ? void 0 : _payload$callback.call(payload, true);\n    } catch (e) {\n      var _payload$callback2;\n      yield put(actions.setMfaState({\n        saving: false,\n        error: e.message\n      }));\n      (_payload$callback2 = payload.callback) == null ? void 0 : _payload$callback2.call(payload, false, e);\n    }\n  }();\n}\nfunction preEnrollMfaWebAuthn(_ref13) {\n  let {\n    payload\n  } = _ref13;\n  return function* () {\n    yield put(actions.setMfaState({\n      saving: true\n    }));\n    try {\n      var _data$options$exclude, _payload$callback3;\n      const data = yield call(api.auth.preEnrollMFAWebAuthn);\n      const options = _extends({}, data.options, {\n        challenge: base64urlDecode(data.options.challenge),\n        user: _extends({}, data.options.user, {\n          id: base64urlDecode(data.options.user.id)\n        }),\n        excludeCredentials: (_data$options$exclude = data.options.excludeCredentials) == null ? void 0 : _data$options$exclude.map(credentials => _extends({}, credentials, {\n          id: base64urlDecode(credentials.id)\n        }))\n      });\n      yield put(actions.setMfaState({\n        saving: false\n      }));\n      (_payload$callback3 = payload.callback) == null ? void 0 : _payload$callback3.call(payload, {\n        options,\n        webauthnToken: data.webauthnToken\n      });\n    } catch (e) {\n      var _payload$callback4;\n      yield put(actions.setMfaState({\n        saving: false,\n        error: e.message\n      }));\n      (_payload$callback4 = payload.callback) == null ? void 0 : _payload$callback4.call(payload, null, e);\n    }\n  }();\n}\nfunction* enrollMfaWebAuthn(_ref3) {\n  let {\n      payload: {\n        callback\n      }\n    } = _ref3,\n    payload = _objectWithoutPropertiesLoose(_ref3.payload, _excluded3);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  try {\n    const publicKey = publicKeyCredentialToJSON(payload.publicKey);\n    const data = yield call(api.auth.enrollMFAWebAuthn, _extends({}, payload, {\n      options: publicKey\n    }));\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    const mfaState = yield getMfaStateAfterEnroll(data);\n    yield put(actions.setMfaState(_extends({}, mfaState, {\n      mfaDevices\n    })));\n    callback == null ? void 0 : callback(mfaState.recoveryCode);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    callback == null ? void 0 : callback(null, e);\n  }\n}\nfunction* preDisableMfaWebAuthn(_ref4) {\n  let {\n      payload: {\n        deviceId,\n        callback\n      }\n    } = _ref4,\n    payload = _objectWithoutPropertiesLoose(_ref4.payload, _excluded4);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  try {\n    var _data$options$allowCr;\n    const data = yield call(api.auth.preDisableMFAWebAuthn, deviceId);\n    const options = _extends({}, data.options, {\n      challenge: base64urlDecode(data.options.challenge),\n      allowCredentials: (_data$options$allowCr = data.options.allowCredentials) == null ? void 0 : _data$options$allowCr.map(credentials => _extends({}, credentials, {\n        id: base64urlDecode(credentials.id)\n      }))\n    });\n    yield put(actions.setMfaState({\n      saving: false\n    }));\n    callback == null ? void 0 : callback({\n      options,\n      webauthnToken: data.webauthnToken\n    });\n  } catch (e) {\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    callback == null ? void 0 : callback(null, e);\n  }\n}\nfunction* disableMfaWebAuthn(_ref5) {\n  let {\n      payload: {\n        deviceId,\n        callback\n      }\n    } = _ref5,\n    payload = _objectWithoutPropertiesLoose(_ref5.payload, _excluded5);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  try {\n    const publicKey = publicKeyCredentialToJSON(payload.publicKey);\n    yield call(api.auth.disableMFAWebAuthn, deviceId, _extends({}, payload, {\n      options: publicKey\n    }));\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      mfaDevices\n    }));\n    callback == null ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    callback == null ? void 0 : callback(false, e);\n  }\n}\nfunction preEnrollMfaSms(_ref14) {\n  let {\n    payload\n  } = _ref14;\n  return function* () {\n    yield put(actions.setMfaState({\n      saving: true\n    }));\n    try {\n      var _payload$callback5;\n      const res = yield call(api.auth.preEnrollMFASMS, payload);\n      yield put(actions.setMfaState({\n        saving: false,\n        error: undefined,\n        otcToken: res.otcToken,\n        phoneNumber: res.phoneNumber\n      }));\n      (_payload$callback5 = payload.callback) == null ? void 0 : _payload$callback5.call(payload, true);\n    } catch (e) {\n      var _payload$callback6;\n      yield put(actions.setMfaState({\n        saving: false,\n        error: e.message\n      }));\n      (_payload$callback6 = payload.callback) == null ? void 0 : _payload$callback6.call(payload, false, e);\n    }\n  }();\n}\nfunction* enrollMfaSms(_ref6) {\n  let {\n      payload: {\n        callback\n      }\n    } = _ref6,\n    payload = _objectWithoutPropertiesLoose(_ref6.payload, _excluded6);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  try {\n    const data = yield call(api.auth.enrollMFASMS, payload);\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    const mfaState = yield getMfaStateAfterEnroll(data);\n    yield put(actions.setMfaState(_extends({}, mfaState, {\n      mfaDevices\n    })));\n    callback == null ? void 0 : callback(mfaState.recoveryCode);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    callback == null ? void 0 : callback(null, e);\n  }\n}\nfunction* preDisableMfaSms(_ref7) {\n  let {\n      payload: {\n        deviceId\n      }\n    } = _ref7,\n    payload = _objectWithoutPropertiesLoose(_ref7.payload, _excluded7);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  try {\n    var _payload$callback7;\n    const res = yield call(api.auth.preDisableMFASMS, deviceId);\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      otcToken: res.otcToken,\n      phoneNumber: res.phoneNumber\n    }));\n    (_payload$callback7 = payload.callback) == null ? void 0 : _payload$callback7.call(payload, true);\n  } catch (e) {\n    var _payload$callback8;\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    (_payload$callback8 = payload.callback) == null ? void 0 : _payload$callback8.call(payload, false, e);\n  }\n}\nfunction* disableMfaSms(_ref8) {\n  let {\n      payload: {\n        deviceId\n      }\n    } = _ref8,\n    payload = _objectWithoutPropertiesLoose(_ref8.payload, _excluded8);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  try {\n    var _payload$callback9;\n    yield call(api.auth.disableMFASMS, deviceId, payload);\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      mfaDevices\n    }));\n    (_payload$callback9 = payload.callback) == null ? void 0 : _payload$callback9.call(payload, true);\n  } catch (e) {\n    var _payload$callback10;\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    (_payload$callback10 = payload.callback) == null ? void 0 : _payload$callback10.call(payload, false, e);\n  }\n}\nfunction* getMFADevices() {\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n  try {\n    const user = yield select(state => state.auth.user);\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    yield put(actions.setMfaState({\n      loading: false,\n      error: undefined,\n      mfaDevices\n    }));\n  } catch (e) {\n    yield put(actions.setMfaState({\n      loading: false,\n      error: e.message\n    }));\n  }\n}\nfunction* getMFAStrategies() {\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n  try {\n    const res = yield call(api.auth.getMFAStrategiesConfig);\n    const mfaStrategies = res.strategies.filter(_ref15 => {\n      let {\n        isActive\n      } = _ref15;\n      return isActive;\n    }).map(_ref16 => {\n      let {\n        strategy\n      } = _ref16;\n      return strategy;\n    });\n    yield put(actions.setMfaState({\n      loading: false,\n      error: undefined,\n      mfaStrategies\n    }));\n  } catch (e) {\n    yield put(actions.setMfaState({\n      loading: false,\n      error: e.message\n    }));\n  }\n}\nexport function* mfaSagas() {\n  yield takeEvery(actions.enrollMfa, enrollMfa);\n  yield takeEvery(actions.getMFADevices, getMFADevices);\n  yield takeEvery(actions.getMFAStrategies, getMFAStrategies);\n  yield takeEvery(actions.verifyMfa, verifyMfa);\n  yield takeEvery(actions.disableMfa, disableMfa);\n  yield takeEvery(actions.verifyMfaAfterForce, verifyMfaAfterForce);\n  yield takeEvery(actions.preDisableMfaSms, preDisableMfaSms);\n  yield takeEvery(actions.disableMfaSms, disableMfaSms);\n  yield takeEvery(actions.preEnrollMfaSms, preEnrollMfaSms);\n  yield takeEvery(actions.enrollMfaSms, enrollMfaSms);\n  yield takeEvery(actions.preEnrollMfaWebAuthn, preEnrollMfaWebAuthn);\n  yield takeEvery(actions.enrollMfaWebAuthn, enrollMfaWebAuthn);\n  yield takeEvery(actions.preDisableMfaWebAuthn, preDisableMfaWebAuthn);\n  yield takeEvery(actions.disableMfaWebAuthn, disableMfaWebAuthn);\n}\n/*********************************\n *  Preview Sagas\n *********************************/\n\nfunction* enrollMfaMock() {\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  const qrCode = 'test';\n  yield put(actions.setMfaState({\n    saving: false,\n    error: undefined,\n    qrCode\n  }));\n}\nfunction verifyMfaMock(_ref17) {\n  let {\n    payload: {\n      callback\n    }\n  } = _ref17;\n  return function* () {\n    const {\n      mfaDevices = {\n        webauthn: [],\n        phones: [],\n        authenticators: []\n      }\n    } = yield select(state => state.auth.mfaState);\n    yield put(actions.setMfaState({\n      saving: true\n    }));\n    yield delay();\n    const data = {\n      token: 'token',\n      recoveryCode: 'recoveryCode'\n    };\n    const mfaState = {\n      step: MFAStep.recoveryCode,\n      loading: false,\n      error: undefined,\n      saving: false,\n      mfaDevices: _extends({}, mfaDevices, {\n        authenticators: [{\n          id: 'authenticator-id'\n        }]\n      })\n    };\n    if (data != null && data.recoveryCode) {\n      mfaState.recoveryCode = data.recoveryCode;\n    }\n    yield put(actions.setMfaState(mfaState));\n    yield put(actions.setUser(_extends({}, userDemo, {\n      mfaEnrolled: true\n    })));\n    callback == null ? void 0 : callback(mfaState.recoveryCode);\n  }();\n}\nfunction* verifyMfaAfterForceMock(_ref9) {\n  let {\n      payload: {\n        callback\n      }\n    } = _ref9,\n    payload = _objectWithoutPropertiesLoose(_ref9.payload, _excluded9);\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n  yield delay();\n  const data = _extends({}, payload, {\n    recoveryCode: 'recoveryCode'\n  });\n  const mfaState = {\n    step: MFAStep.recoveryCode,\n    loading: false,\n    error: undefined,\n    saving: false\n  };\n  if (data != null && data.recoveryCode) {\n    mfaState.recoveryCode = data.recoveryCode;\n  }\n  yield put(actions.setMfaState(mfaState));\n  yield delay();\n  yield put(actions.setUser(_extends({}, userDemo, {\n    mfaEnrolled: true\n  })));\n  callback == null ? void 0 : callback(mfaState.recoveryCode);\n}\nfunction disableMfaMock(_ref18) {\n  let {\n    payload\n  } = _ref18;\n  return function* () {\n    var _payload$callback11;\n    const {\n      mfaDevices = {\n        webauthn: [],\n        phones: [],\n        authenticators: []\n      }\n    } = yield select(state => state.auth.mfaState);\n    yield put(actions.setMfaState({\n      saving: true\n    }));\n    yield delay();\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      mfaDevices: _extends({}, mfaDevices, {\n        authenticators: []\n      })\n    }));\n    yield put(actions.setUser(_extends({}, userDemo)));\n    (_payload$callback11 = payload.callback) == null ? void 0 : _payload$callback11.call(payload, true);\n  }();\n}\nfunction* preDisableMfaSmsMock(_ref10) {\n  let {} = _ref10,\n    payload = _objectWithoutPropertiesLoose(_ref10.payload, _excluded10);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  try {\n    var _payload$callback12;\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      otcToken: 'otc-token',\n      phoneNumber: '+972504589346'\n    }));\n    (_payload$callback12 = payload.callback) == null ? void 0 : _payload$callback12.call(payload, true);\n  } catch (e) {\n    var _payload$callback13;\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    (_payload$callback13 = payload.callback) == null ? void 0 : _payload$callback13.call(payload, false, e);\n  }\n}\nfunction disableMfaSmsMock(_ref19) {\n  let {\n    payload\n  } = _ref19;\n  return function* () {\n    var _payload$callback14;\n    const {\n      mfaDevices = {\n        webauthn: [],\n        phones: [],\n        authenticators: []\n      }\n    } = yield select(state => state.auth.mfaState);\n    yield put(actions.setMfaState({\n      saving: true\n    }));\n    yield delay();\n    yield put(actions.setMfaState({\n      loading: false,\n      error: undefined,\n      mfaDevices: _extends({}, mfaDevices, {\n        phones: []\n      })\n    }));\n    yield put(actions.setUser(_extends({}, userDemo)));\n    (_payload$callback14 = payload.callback) == null ? void 0 : _payload$callback14.call(payload, true);\n  }();\n}\nfunction preEnrollMfaSmsMock(_ref20) {\n  let {\n    payload\n  } = _ref20;\n  return function* () {\n    var _payload$callback15;\n    yield put(actions.setMfaState({\n      saving: true\n    }));\n    yield delay();\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      otcToken: 'otc-token',\n      phoneNumber: '+972504589346'\n    }));\n    (_payload$callback15 = payload.callback) == null ? void 0 : _payload$callback15.call(payload, true);\n  }();\n}\nfunction* enrollMfaSmsMock(_ref11) {\n  let {\n      payload: {\n        callback\n      }\n    } = _ref11,\n    payload = _objectWithoutPropertiesLoose(_ref11.payload, _excluded11);\n  const {\n    mfaDevices = {\n      webauthn: [],\n      phones: [],\n      authenticators: []\n    }\n  } = yield select(state => state.auth.mfaState);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  yield delay();\n  const data = {\n    token: 'token',\n    recoveryCode: 'recoveryCode'\n  };\n  const mfaState = {\n    step: MFAStep.recoveryCode,\n    loading: false,\n    error: undefined,\n    saving: false,\n    mfaDevices: _extends({}, mfaDevices, {\n      phones: [{\n        id: 'phone-id',\n        phoneNumber: '+972504589346'\n      }]\n    })\n  };\n  if (data != null && data.recoveryCode) {\n    mfaState.recoveryCode = data.recoveryCode;\n  }\n  yield put(actions.setMfaState(mfaState));\n  yield put(actions.setUser(_extends({}, userDemo, {\n    mfaEnrolled: true\n  })));\n  callback == null ? void 0 : callback(mfaState.recoveryCode);\n}\nexport function* mfaSagasMock() {\n  yield takeEvery(actions.enrollMfa, enrollMfaMock);\n  yield takeEvery(actions.verifyMfa, verifyMfaMock);\n  yield takeEvery(actions.disableMfa, disableMfaMock);\n  yield takeEvery(actions.verifyMfaAfterForce, verifyMfaAfterForceMock);\n  yield takeEvery(actions.preDisableMfaSms, preDisableMfaSmsMock);\n  yield takeEvery(actions.disableMfaSms, disableMfaSmsMock);\n  yield takeEvery(actions.preEnrollMfaSms, preEnrollMfaSmsMock);\n  yield takeEvery(actions.enrollMfaSms, enrollMfaSmsMock);\n}","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","_excluded","_excluded2","_excluded3","_excluded4","_excluded5","_excluded6","_excluded7","_excluded8","_excluded9","_excluded10","_excluded11","call","put","select","takeEvery","api","actions","MFAStep","base64urlDecode","delay","publicKeyCredentialToJSON","userDemo","getMfaStateAfterEnroll","res","step","state","auth","mfaState","recoveryCode","loading","saving","error","undefined","enrollMfa","setMfaState","qrCode","e","message","verifyMfa","_ref","payload","callback","user","data","mfaDevices","getMFADevices","setUser","mfaEnrolled","verifyMfaAfterForce","_ref2","loginWithMfa","setState","loadTenants","disableMfa","_payload$callback","_payload$callback2","preEnrollMfaWebAuthn","_data$options$exclude","_payload$callback3","preEnrollMFAWebAuthn","options","challenge","id","excludeCredentials","map","credentials","webauthnToken","_payload$callback4","enrollMfaWebAuthn","_ref3","publicKey","enrollMFAWebAuthn","preDisableMfaWebAuthn","_ref4","deviceId","_data$options$allowCr","preDisableMFAWebAuthn","allowCredentials","disableMfaWebAuthn","_ref5","disableMFAWebAuthn","preEnrollMfaSms","_payload$callback5","preEnrollMFASMS","otcToken","phoneNumber","_payload$callback6","enrollMfaSms","_ref6","enrollMFASMS","preDisableMfaSms","_ref7","_payload$callback7","preDisableMFASMS","_payload$callback8","disableMfaSms","_ref8","_payload$callback9","disableMFASMS","_payload$callback10","getMFAStrategies","getMFAStrategiesConfig","mfaStrategies","strategies","filter","isActive","strategy","mfaSagas","enrollMfaMock","verifyMfaMock","webauthn","phones","authenticators","token","verifyMfaAfterForceMock","_ref9","disableMfaMock","_payload$callback11","preDisableMfaSmsMock","_ref10","_payload$callback12","_payload$callback13","disableMfaSmsMock","_payload$callback14","preEnrollMfaSmsMock","_payload$callback15","enrollMfaSmsMock","_ref11","mfaSagasMock"],"sources":["/Users/sagiittah/Downloads/my-app/node_modules/@frontegg/redux-store/auth/MfaState/saga.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"callback\"],\n      _excluded2 = [\"callback\"],\n      _excluded3 = [\"callback\"],\n      _excluded4 = [\"deviceId\", \"callback\"],\n      _excluded5 = [\"deviceId\", \"callback\"],\n      _excluded6 = [\"callback\"],\n      _excluded7 = [\"deviceId\"],\n      _excluded8 = [\"deviceId\"],\n      _excluded9 = [\"callback\"],\n      _excluded10 = [\"deviceId\"],\n      _excluded11 = [\"callback\"];\nimport { call, put, select, takeEvery } from 'redux-saga/effects';\nimport { api } from '@frontegg/rest-api';\nimport { actions } from '../reducer';\nimport { MFAStep } from './interfaces';\nimport { base64urlDecode, delay, publicKeyCredentialToJSON } from '../utils';\nimport { userDemo } from '../dummy';\n\nfunction* getMfaStateAfterEnroll(res) {\n  const {\n    step\n  } = yield select(state => state.auth.mfaState);\n  const mfaState = {\n    step: res.recoveryCode ? MFAStep.recoveryCode : step,\n    loading: false,\n    saving: false,\n    error: undefined,\n    recoveryCode: res == null ? void 0 : res.recoveryCode\n  };\n  return mfaState;\n}\n\nfunction* enrollMfa() {\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n\n  try {\n    const {\n      qrCode\n    } = yield call(api.auth.enrollMfa);\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      qrCode\n    }));\n  } catch (e) {\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n  }\n}\n\nfunction* verifyMfa(_ref) {\n  let {\n    payload: {\n      callback\n    }\n  } = _ref,\n      payload = _objectWithoutPropertiesLoose(_ref.payload, _excluded);\n\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n\n  try {\n    const user = yield select(state => state.auth.user);\n    const data = yield call(api.auth.verifyMfa, payload);\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    const mfaState = yield getMfaStateAfterEnroll(data);\n    yield put(actions.setMfaState(_extends({}, mfaState, {\n      mfaDevices\n    })));\n    yield put(actions.setUser(_extends({}, user, {\n      mfaEnrolled: true\n    })));\n    callback == null ? void 0 : callback(mfaState.recoveryCode);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    callback == null ? void 0 : callback(null, e);\n  }\n}\n\nfunction* verifyMfaAfterForce(_ref2) {\n  let {\n    payload: {\n      callback\n    }\n  } = _ref2,\n      payload = _objectWithoutPropertiesLoose(_ref2.payload, _excluded2);\n\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n\n  try {\n    const user = yield call(api.auth.loginWithMfa, payload);\n    const mfaState = {\n      step: MFAStep.recoveryCode,\n      loading: false,\n      saving: false,\n      error: undefined\n    };\n\n    if (user != null && user.recoveryCode) {\n      mfaState.recoveryCode = user.recoveryCode;\n    }\n\n    yield put(actions.setMfaState(mfaState));\n    yield put(actions.setState({\n      user\n    }));\n    yield put(actions.loadTenants());\n    callback == null ? void 0 : callback(mfaState.recoveryCode);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      loading: false,\n      error: e.message\n    }));\n    callback == null ? void 0 : callback(null, e);\n  }\n}\n\nfunction* disableMfa({\n  payload\n}) {\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n\n  try {\n    var _payload$callback;\n\n    yield call(api.auth.disableMfa, payload);\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      mfaDevices\n    }));\n    (_payload$callback = payload.callback) == null ? void 0 : _payload$callback.call(payload, true);\n  } catch (e) {\n    var _payload$callback2;\n\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    (_payload$callback2 = payload.callback) == null ? void 0 : _payload$callback2.call(payload, false, e);\n  }\n}\n\nfunction* preEnrollMfaWebAuthn({\n  payload\n}) {\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n\n  try {\n    var _data$options$exclude, _payload$callback3;\n\n    const data = yield call(api.auth.preEnrollMFAWebAuthn);\n\n    const options = _extends({}, data.options, {\n      challenge: base64urlDecode(data.options.challenge),\n      user: _extends({}, data.options.user, {\n        id: base64urlDecode(data.options.user.id)\n      }),\n      excludeCredentials: (_data$options$exclude = data.options.excludeCredentials) == null ? void 0 : _data$options$exclude.map(credentials => _extends({}, credentials, {\n        id: base64urlDecode(credentials.id)\n      }))\n    });\n\n    yield put(actions.setMfaState({\n      saving: false\n    }));\n    (_payload$callback3 = payload.callback) == null ? void 0 : _payload$callback3.call(payload, {\n      options,\n      webauthnToken: data.webauthnToken\n    });\n  } catch (e) {\n    var _payload$callback4;\n\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    (_payload$callback4 = payload.callback) == null ? void 0 : _payload$callback4.call(payload, null, e);\n  }\n}\n\nfunction* enrollMfaWebAuthn(_ref3) {\n  let {\n    payload: {\n      callback\n    }\n  } = _ref3,\n      payload = _objectWithoutPropertiesLoose(_ref3.payload, _excluded3);\n\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n\n  try {\n    const publicKey = publicKeyCredentialToJSON(payload.publicKey);\n    const data = yield call(api.auth.enrollMFAWebAuthn, _extends({}, payload, {\n      options: publicKey\n    }));\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    const mfaState = yield getMfaStateAfterEnroll(data);\n    yield put(actions.setMfaState(_extends({}, mfaState, {\n      mfaDevices\n    })));\n    callback == null ? void 0 : callback(mfaState.recoveryCode);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    callback == null ? void 0 : callback(null, e);\n  }\n}\n\nfunction* preDisableMfaWebAuthn(_ref4) {\n  let {\n    payload: {\n      deviceId,\n      callback\n    }\n  } = _ref4,\n      payload = _objectWithoutPropertiesLoose(_ref4.payload, _excluded4);\n\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n\n  try {\n    var _data$options$allowCr;\n\n    const data = yield call(api.auth.preDisableMFAWebAuthn, deviceId);\n\n    const options = _extends({}, data.options, {\n      challenge: base64urlDecode(data.options.challenge),\n      allowCredentials: (_data$options$allowCr = data.options.allowCredentials) == null ? void 0 : _data$options$allowCr.map(credentials => _extends({}, credentials, {\n        id: base64urlDecode(credentials.id)\n      }))\n    });\n\n    yield put(actions.setMfaState({\n      saving: false\n    }));\n    callback == null ? void 0 : callback({\n      options,\n      webauthnToken: data.webauthnToken\n    });\n  } catch (e) {\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    callback == null ? void 0 : callback(null, e);\n  }\n}\n\nfunction* disableMfaWebAuthn(_ref5) {\n  let {\n    payload: {\n      deviceId,\n      callback\n    }\n  } = _ref5,\n      payload = _objectWithoutPropertiesLoose(_ref5.payload, _excluded5);\n\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n\n  try {\n    const publicKey = publicKeyCredentialToJSON(payload.publicKey);\n    yield call(api.auth.disableMFAWebAuthn, deviceId, _extends({}, payload, {\n      options: publicKey\n    }));\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      mfaDevices\n    }));\n    callback == null ? void 0 : callback(true);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    callback == null ? void 0 : callback(false, e);\n  }\n}\n\nfunction* preEnrollMfaSms({\n  payload\n}) {\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n\n  try {\n    var _payload$callback5;\n\n    const res = yield call(api.auth.preEnrollMFASMS, payload);\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      otcToken: res.otcToken,\n      phoneNumber: res.phoneNumber\n    }));\n    (_payload$callback5 = payload.callback) == null ? void 0 : _payload$callback5.call(payload, true);\n  } catch (e) {\n    var _payload$callback6;\n\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    (_payload$callback6 = payload.callback) == null ? void 0 : _payload$callback6.call(payload, false, e);\n  }\n}\n\nfunction* enrollMfaSms(_ref6) {\n  let {\n    payload: {\n      callback\n    }\n  } = _ref6,\n      payload = _objectWithoutPropertiesLoose(_ref6.payload, _excluded6);\n\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n\n  try {\n    const data = yield call(api.auth.enrollMFASMS, payload);\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    const mfaState = yield getMfaStateAfterEnroll(data);\n    yield put(actions.setMfaState(_extends({}, mfaState, {\n      mfaDevices\n    })));\n    callback == null ? void 0 : callback(mfaState.recoveryCode);\n  } catch (e) {\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    callback == null ? void 0 : callback(null, e);\n  }\n}\n\nfunction* preDisableMfaSms(_ref7) {\n  let {\n    payload: {\n      deviceId\n    }\n  } = _ref7,\n      payload = _objectWithoutPropertiesLoose(_ref7.payload, _excluded7);\n\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n\n  try {\n    var _payload$callback7;\n\n    const res = yield call(api.auth.preDisableMFASMS, deviceId);\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      otcToken: res.otcToken,\n      phoneNumber: res.phoneNumber\n    }));\n    (_payload$callback7 = payload.callback) == null ? void 0 : _payload$callback7.call(payload, true);\n  } catch (e) {\n    var _payload$callback8;\n\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    (_payload$callback8 = payload.callback) == null ? void 0 : _payload$callback8.call(payload, false, e);\n  }\n}\n\nfunction* disableMfaSms(_ref8) {\n  let {\n    payload: {\n      deviceId\n    }\n  } = _ref8,\n      payload = _objectWithoutPropertiesLoose(_ref8.payload, _excluded8);\n\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n\n  try {\n    var _payload$callback9;\n\n    yield call(api.auth.disableMFASMS, deviceId, payload);\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      mfaDevices\n    }));\n    (_payload$callback9 = payload.callback) == null ? void 0 : _payload$callback9.call(payload, true);\n  } catch (e) {\n    var _payload$callback10;\n\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    (_payload$callback10 = payload.callback) == null ? void 0 : _payload$callback10.call(payload, false, e);\n  }\n}\n\nfunction* getMFADevices() {\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n\n  try {\n    const user = yield select(state => state.auth.user);\n    const mfaDevices = yield call(api.auth.getMFADevices);\n    yield put(actions.setMfaState({\n      loading: false,\n      error: undefined,\n      mfaDevices\n    }));\n  } catch (e) {\n    yield put(actions.setMfaState({\n      loading: false,\n      error: e.message\n    }));\n  }\n}\n\nfunction* getMFAStrategies() {\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n\n  try {\n    const res = yield call(api.auth.getMFAStrategiesConfig);\n    const mfaStrategies = res.strategies.filter(({\n      isActive\n    }) => isActive).map(({\n      strategy\n    }) => strategy);\n    yield put(actions.setMfaState({\n      loading: false,\n      error: undefined,\n      mfaStrategies\n    }));\n  } catch (e) {\n    yield put(actions.setMfaState({\n      loading: false,\n      error: e.message\n    }));\n  }\n}\n\nexport function* mfaSagas() {\n  yield takeEvery(actions.enrollMfa, enrollMfa);\n  yield takeEvery(actions.getMFADevices, getMFADevices);\n  yield takeEvery(actions.getMFAStrategies, getMFAStrategies);\n  yield takeEvery(actions.verifyMfa, verifyMfa);\n  yield takeEvery(actions.disableMfa, disableMfa);\n  yield takeEvery(actions.verifyMfaAfterForce, verifyMfaAfterForce);\n  yield takeEvery(actions.preDisableMfaSms, preDisableMfaSms);\n  yield takeEvery(actions.disableMfaSms, disableMfaSms);\n  yield takeEvery(actions.preEnrollMfaSms, preEnrollMfaSms);\n  yield takeEvery(actions.enrollMfaSms, enrollMfaSms);\n  yield takeEvery(actions.preEnrollMfaWebAuthn, preEnrollMfaWebAuthn);\n  yield takeEvery(actions.enrollMfaWebAuthn, enrollMfaWebAuthn);\n  yield takeEvery(actions.preDisableMfaWebAuthn, preDisableMfaWebAuthn);\n  yield takeEvery(actions.disableMfaWebAuthn, disableMfaWebAuthn);\n}\n/*********************************\n *  Preview Sagas\n *********************************/\n\nfunction* enrollMfaMock() {\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  const qrCode = 'test';\n  yield put(actions.setMfaState({\n    saving: false,\n    error: undefined,\n    qrCode\n  }));\n}\n\nfunction* verifyMfaMock({\n  payload: {\n    callback\n  }\n}) {\n  const {\n    mfaDevices = {\n      webauthn: [],\n      phones: [],\n      authenticators: []\n    }\n  } = yield select(state => state.auth.mfaState);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  yield delay();\n  const data = {\n    token: 'token',\n    recoveryCode: 'recoveryCode'\n  };\n  const mfaState = {\n    step: MFAStep.recoveryCode,\n    loading: false,\n    error: undefined,\n    saving: false,\n    mfaDevices: _extends({}, mfaDevices, {\n      authenticators: [{\n        id: 'authenticator-id'\n      }]\n    })\n  };\n\n  if (data != null && data.recoveryCode) {\n    mfaState.recoveryCode = data.recoveryCode;\n  }\n\n  yield put(actions.setMfaState(mfaState));\n  yield put(actions.setUser(_extends({}, userDemo, {\n    mfaEnrolled: true\n  })));\n  callback == null ? void 0 : callback(mfaState.recoveryCode);\n}\n\nfunction* verifyMfaAfterForceMock(_ref9) {\n  let {\n    payload: {\n      callback\n    }\n  } = _ref9,\n      payload = _objectWithoutPropertiesLoose(_ref9.payload, _excluded9);\n\n  yield put(actions.setMfaState({\n    loading: true\n  }));\n  yield delay();\n\n  const data = _extends({}, payload, {\n    recoveryCode: 'recoveryCode'\n  });\n\n  const mfaState = {\n    step: MFAStep.recoveryCode,\n    loading: false,\n    error: undefined,\n    saving: false\n  };\n\n  if (data != null && data.recoveryCode) {\n    mfaState.recoveryCode = data.recoveryCode;\n  }\n\n  yield put(actions.setMfaState(mfaState));\n  yield delay();\n  yield put(actions.setUser(_extends({}, userDemo, {\n    mfaEnrolled: true\n  })));\n  callback == null ? void 0 : callback(mfaState.recoveryCode);\n}\n\nfunction* disableMfaMock({\n  payload\n}) {\n  var _payload$callback11;\n\n  const {\n    mfaDevices = {\n      webauthn: [],\n      phones: [],\n      authenticators: []\n    }\n  } = yield select(state => state.auth.mfaState);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  yield delay();\n  yield put(actions.setMfaState({\n    saving: false,\n    error: undefined,\n    mfaDevices: _extends({}, mfaDevices, {\n      authenticators: []\n    })\n  }));\n  yield put(actions.setUser(_extends({}, userDemo)));\n  (_payload$callback11 = payload.callback) == null ? void 0 : _payload$callback11.call(payload, true);\n}\n\nfunction* preDisableMfaSmsMock(_ref10) {\n  let {} = _ref10,\n      payload = _objectWithoutPropertiesLoose(_ref10.payload, _excluded10);\n\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n\n  try {\n    var _payload$callback12;\n\n    yield put(actions.setMfaState({\n      saving: false,\n      error: undefined,\n      otcToken: 'otc-token',\n      phoneNumber: '+972504589346'\n    }));\n    (_payload$callback12 = payload.callback) == null ? void 0 : _payload$callback12.call(payload, true);\n  } catch (e) {\n    var _payload$callback13;\n\n    yield put(actions.setMfaState({\n      saving: false,\n      error: e.message\n    }));\n    (_payload$callback13 = payload.callback) == null ? void 0 : _payload$callback13.call(payload, false, e);\n  }\n}\n\nfunction* disableMfaSmsMock({\n  payload\n}) {\n  var _payload$callback14;\n\n  const {\n    mfaDevices = {\n      webauthn: [],\n      phones: [],\n      authenticators: []\n    }\n  } = yield select(state => state.auth.mfaState);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  yield delay();\n  yield put(actions.setMfaState({\n    loading: false,\n    error: undefined,\n    mfaDevices: _extends({}, mfaDevices, {\n      phones: []\n    })\n  }));\n  yield put(actions.setUser(_extends({}, userDemo)));\n  (_payload$callback14 = payload.callback) == null ? void 0 : _payload$callback14.call(payload, true);\n}\n\nfunction* preEnrollMfaSmsMock({\n  payload\n}) {\n  var _payload$callback15;\n\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  yield delay();\n  yield put(actions.setMfaState({\n    saving: false,\n    error: undefined,\n    otcToken: 'otc-token',\n    phoneNumber: '+972504589346'\n  }));\n  (_payload$callback15 = payload.callback) == null ? void 0 : _payload$callback15.call(payload, true);\n}\n\nfunction* enrollMfaSmsMock(_ref11) {\n  let {\n    payload: {\n      callback\n    }\n  } = _ref11,\n      payload = _objectWithoutPropertiesLoose(_ref11.payload, _excluded11);\n\n  const {\n    mfaDevices = {\n      webauthn: [],\n      phones: [],\n      authenticators: []\n    }\n  } = yield select(state => state.auth.mfaState);\n  yield put(actions.setMfaState({\n    saving: true\n  }));\n  yield delay();\n  const data = {\n    token: 'token',\n    recoveryCode: 'recoveryCode'\n  };\n  const mfaState = {\n    step: MFAStep.recoveryCode,\n    loading: false,\n    error: undefined,\n    saving: false,\n    mfaDevices: _extends({}, mfaDevices, {\n      phones: [{\n        id: 'phone-id',\n        phoneNumber: '+972504589346'\n      }]\n    })\n  };\n\n  if (data != null && data.recoveryCode) {\n    mfaState.recoveryCode = data.recoveryCode;\n  }\n\n  yield put(actions.setMfaState(mfaState));\n  yield put(actions.setUser(_extends({}, userDemo, {\n    mfaEnrolled: true\n  })));\n  callback == null ? void 0 : callback(mfaState.recoveryCode);\n}\n\nexport function* mfaSagasMock() {\n  yield takeEvery(actions.enrollMfa, enrollMfaMock);\n  yield takeEvery(actions.verifyMfa, verifyMfaMock);\n  yield takeEvery(actions.disableMfa, disableMfaMock);\n  yield takeEvery(actions.verifyMfaAfterForce, verifyMfaAfterForceMock);\n  yield takeEvery(actions.preDisableMfaSms, preDisableMfaSmsMock);\n  yield takeEvery(actions.disableMfaSms, disableMfaSmsMock);\n  yield takeEvery(actions.preEnrollMfaSms, preEnrollMfaSmsMock);\n  yield takeEvery(actions.enrollMfaSms, enrollMfaSmsMock);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}