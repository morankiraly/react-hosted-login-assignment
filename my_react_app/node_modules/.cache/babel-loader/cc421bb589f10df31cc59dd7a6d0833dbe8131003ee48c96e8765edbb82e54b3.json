{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"authenticatedUrl\", \"signUpSuccessUrl\"];\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { createFronteggStore } from '@frontegg/redux-store';\nimport { ContextHolder } from '@frontegg/rest-api';\nimport { useAuth, useAuthRoutes } from '../auth';\nimport { Provider, FronteggStoreContext } from '../FronteggStoreContext';\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst defaultSetLoading = loading => {\n  if (loading) {\n    document.body.classList.add('frontegg-loading');\n  } else {\n    document.body.classList.remove('frontegg-loading');\n  }\n};\nconst HideChildrenIfFronteggRoutes = _ref => {\n  let {\n    children,\n    basename\n  } = _ref;\n  const routes = useAuthRoutes();\n  const uriRef = useRef(window.location.pathname);\n  const animationFrameRef = useRef(0);\n  const [uri, setUri] = useState(window.location.pathname);\n  const checker = useCallback(() => {\n    if (uriRef.current !== window.location.pathname) {\n      uriRef.current = window.location.pathname;\n      setUri(document.location.pathname);\n    }\n    animationFrameRef.current = window.requestAnimationFrame(checker);\n  }, []);\n  useEffect(() => {\n    document.addEventListener('frontegg_onRedirectTo_fired', () => {\n      if (uriRef.current !== window.location.pathname) {\n        uriRef.current = window.location.pathname;\n        setUri(document.location.pathname);\n      }\n    });\n    window.addEventListener('popstate', () => {\n      if (uriRef.current !== window.location.pathname) {\n        uriRef.current = window.location.pathname;\n        setUri(document.location.pathname);\n      }\n    });\n    animationFrameRef.current = window.requestAnimationFrame(checker);\n    return () => {\n      window.cancelAnimationFrame(animationFrameRef.current);\n    };\n  }, [checker, setUri]);\n  const calculatedBasename = basename ? basename.endsWith('/') ? basename.substring(0, basename.length - 1) : '' : '';\n  const checkRoutes = _objectWithoutPropertiesLoose(routes, _excluded);\n  if (Object.values(checkRoutes).map(url => `${calculatedBasename}${url}`).indexOf(uri) !== -1) {\n    return null;\n  }\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: children\n  });\n};\nconst FronteggContent = _ref2 => {\n  let {\n    children,\n    app,\n    setLoading\n  } = _ref2;\n  var _app$options, _app$options2;\n  const {\n    isLoading\n  } = useAuth(_ref3 => {\n    let {\n      isLoading\n    } = _ref3;\n    return {\n      isLoading\n    };\n  });\n  const customLoginBox = !app || (app == null ? void 0 : (_app$options = app.options) == null ? void 0 : _app$options.customLoginBox) === true;\n  const isNextJS = (app == null ? void 0 : (_app$options2 = app.options) == null ? void 0 : _app$options2.framework) === 'nextjs';\n  const alwaysShowChildren = customLoginBox || isNextJS;\n  const loadingRef = useRef(undefined);\n  if (isLoading !== loadingRef.current && !isNextJS) {\n    loadingRef.current = isLoading;\n    setLoading(isLoading);\n  }\n  if (isLoading && !isNextJS) {\n    return null;\n  }\n  if (alwaysShowChildren) {\n    return /*#__PURE__*/_jsx(_Fragment, {\n      children: children\n    });\n  }\n  return /*#__PURE__*/_jsx(HideChildrenIfFronteggRoutes, {\n    basename: app == null ? void 0 : app.options.basename,\n    children: children\n  });\n};\nexport const FronteggStoreProvider = props => {\n  var _app$options$contextO, _app$options3, _app$options$previewM, _app$options4, _app$options5, _app$options6;\n  const {\n    children,\n    app,\n    contextOptions,\n    setLoading = defaultSetLoading\n  } = props; // TODO: make this optionals more readable\n\n  const context = (_app$options$contextO = app == null ? void 0 : (_app$options3 = app.options) == null ? void 0 : _app$options3.contextOptions) != null ? _app$options$contextO : contextOptions;\n  if (!context) {\n    throw Error('contextOptions must not be null or undefined');\n  }\n  const previewMode = (_app$options$previewM = app == null ? void 0 : (_app$options4 = app.options) == null ? void 0 : _app$options4.previewMode) != null ? _app$options$previewM : false;\n  const authOptions = app != null && (_app$options5 = app.options) != null && _app$options5.authOptions ? _extends({}, app.options.authOptions, {\n    hostedLoginBox: app.options.hostedLoginBox\n  }) : {\n    hostedLoginBox: app == null ? void 0 : (_app$options6 = app.options) == null ? void 0 : _app$options6.hostedLoginBox\n  };\n  ContextHolder.setContext(context);\n  const store = useMemo(() => {\n    var _app$options7;\n    return createFronteggStore({\n      context\n    }, app, previewMode, authOptions, undefined, false, app == null ? void 0 : (_app$options7 = app.options) == null ? void 0 : _app$options7.urlStrategy);\n  }, [app, previewMode]);\n  return /*#__PURE__*/_jsx(Provider, {\n    context: FronteggStoreContext,\n    store: store,\n    children: /*#__PURE__*/_jsx(FronteggContent, {\n      setLoading: setLoading,\n      app: app,\n      children: children\n    })\n  });\n};","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","_excluded","React","useCallback","useEffect","useMemo","useRef","useState","createFronteggStore","ContextHolder","useAuth","useAuthRoutes","Provider","FronteggStoreContext","Fragment","_Fragment","jsx","_jsx","defaultSetLoading","loading","document","body","classList","add","remove","HideChildrenIfFronteggRoutes","children","basename","routes","uriRef","window","location","pathname","animationFrameRef","uri","setUri","checker","current","requestAnimationFrame","addEventListener","cancelAnimationFrame","calculatedBasename","endsWith","substring","length","checkRoutes","Object","values","map","url","indexOf","FronteggContent","app","setLoading","_app$options","_app$options2","isLoading","customLoginBox","options","isNextJS","framework","alwaysShowChildren","loadingRef","undefined","FronteggStoreProvider","props","_app$options$contextO","_app$options3","_app$options$previewM","_app$options4","_app$options5","_app$options6","contextOptions","context","Error","previewMode","authOptions","hostedLoginBox","setContext","store","_app$options7","urlStrategy"],"sources":["/Users/sagiittah/Downloads/my-app/node_modules/@frontegg/react-hooks/FronteggProvider/index.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"authenticatedUrl\", \"signUpSuccessUrl\"];\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { createFronteggStore } from '@frontegg/redux-store';\nimport { ContextHolder } from '@frontegg/rest-api';\nimport { useAuth, useAuthRoutes } from '../auth';\nimport { Provider, FronteggStoreContext } from '../FronteggStoreContext';\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nconst defaultSetLoading = loading => {\n  if (loading) {\n    document.body.classList.add('frontegg-loading');\n  } else {\n    document.body.classList.remove('frontegg-loading');\n  }\n};\n\nconst HideChildrenIfFronteggRoutes = ({\n  children,\n  basename\n}) => {\n  const routes = useAuthRoutes();\n  const uriRef = useRef(window.location.pathname);\n  const animationFrameRef = useRef(0);\n  const [uri, setUri] = useState(window.location.pathname);\n  const checker = useCallback(() => {\n    if (uriRef.current !== window.location.pathname) {\n      uriRef.current = window.location.pathname;\n      setUri(document.location.pathname);\n    }\n\n    animationFrameRef.current = window.requestAnimationFrame(checker);\n  }, []);\n  useEffect(() => {\n    document.addEventListener('frontegg_onRedirectTo_fired', () => {\n      if (uriRef.current !== window.location.pathname) {\n        uriRef.current = window.location.pathname;\n        setUri(document.location.pathname);\n      }\n    });\n    window.addEventListener('popstate', () => {\n      if (uriRef.current !== window.location.pathname) {\n        uriRef.current = window.location.pathname;\n        setUri(document.location.pathname);\n      }\n    });\n    animationFrameRef.current = window.requestAnimationFrame(checker);\n    return () => {\n      window.cancelAnimationFrame(animationFrameRef.current);\n    };\n  }, [checker, setUri]);\n  const calculatedBasename = basename ? basename.endsWith('/') ? basename.substring(0, basename.length - 1) : '' : '';\n\n  const checkRoutes = _objectWithoutPropertiesLoose(routes, _excluded);\n\n  if (Object.values(checkRoutes).map(url => `${calculatedBasename}${url}`).indexOf(uri) !== -1) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: children\n  });\n};\n\nconst FronteggContent = ({\n  children,\n  app,\n  setLoading\n}) => {\n  var _app$options, _app$options2;\n\n  const {\n    isLoading\n  } = useAuth(({\n    isLoading\n  }) => ({\n    isLoading\n  }));\n  const customLoginBox = !app || (app == null ? void 0 : (_app$options = app.options) == null ? void 0 : _app$options.customLoginBox) === true;\n  const isNextJS = (app == null ? void 0 : (_app$options2 = app.options) == null ? void 0 : _app$options2.framework) === 'nextjs';\n  const alwaysShowChildren = customLoginBox || isNextJS;\n  const loadingRef = useRef(undefined);\n\n  if (isLoading !== loadingRef.current && !isNextJS) {\n    loadingRef.current = isLoading;\n    setLoading(isLoading);\n  }\n\n  if (isLoading && !isNextJS) {\n    return null;\n  }\n\n  if (alwaysShowChildren) {\n    return /*#__PURE__*/_jsx(_Fragment, {\n      children: children\n    });\n  }\n\n  return /*#__PURE__*/_jsx(HideChildrenIfFronteggRoutes, {\n    basename: app == null ? void 0 : app.options.basename,\n    children: children\n  });\n};\n\nexport const FronteggStoreProvider = props => {\n  var _app$options$contextO, _app$options3, _app$options$previewM, _app$options4, _app$options5, _app$options6;\n\n  const {\n    children,\n    app,\n    contextOptions,\n    setLoading = defaultSetLoading\n  } = props; // TODO: make this optionals more readable\n\n  const context = (_app$options$contextO = app == null ? void 0 : (_app$options3 = app.options) == null ? void 0 : _app$options3.contextOptions) != null ? _app$options$contextO : contextOptions;\n\n  if (!context) {\n    throw Error('contextOptions must not be null or undefined');\n  }\n\n  const previewMode = (_app$options$previewM = app == null ? void 0 : (_app$options4 = app.options) == null ? void 0 : _app$options4.previewMode) != null ? _app$options$previewM : false;\n  const authOptions = app != null && (_app$options5 = app.options) != null && _app$options5.authOptions ? _extends({}, app.options.authOptions, {\n    hostedLoginBox: app.options.hostedLoginBox\n  }) : {\n    hostedLoginBox: app == null ? void 0 : (_app$options6 = app.options) == null ? void 0 : _app$options6.hostedLoginBox\n  };\n  ContextHolder.setContext(context);\n  const store = useMemo(() => {\n    var _app$options7;\n\n    return createFronteggStore({\n      context\n    }, app, previewMode, authOptions, undefined, false, app == null ? void 0 : (_app$options7 = app.options) == null ? void 0 : _app$options7.urlStrategy);\n  }, [app, previewMode]);\n  return /*#__PURE__*/_jsx(Provider, {\n    context: FronteggStoreContext,\n    store: store,\n    children: /*#__PURE__*/_jsx(FronteggContent, {\n      setLoading: setLoading,\n      app: app,\n      children: children\n    })\n  });\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}