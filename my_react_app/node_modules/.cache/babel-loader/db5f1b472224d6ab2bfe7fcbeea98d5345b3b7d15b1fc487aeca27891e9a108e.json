{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"dataFilters\"],\n  _excluded2 = [\"templateId\", \"dataFilters\"],\n  _excluded3 = [\"dataFilters\"];\nimport { Get, Post } from '../fetch';\nimport { urls } from '../constants';\nexport async function getReports(body) {\n  return Get(`${urls.reports.service.v2}/tenant-reports`, body);\n}\nexport async function getReport(body) {\n  return Get(`${urls.reports.service.v2}/${body.id}/tenant-reports`);\n}\nexport async function renderReport(_ref) {\n  let {\n      dataFilters\n    } = _ref,\n    body = _objectWithoutPropertiesLoose(_ref, _excluded);\n  const html = await Get(`${urls.reports.trigger.v1}/preview-report`, _extends({}, body, {\n    dataFilters: btoa(JSON.stringify(dataFilters || {})),\n    responseType: 'html'\n  }), {\n    responseType: 'plain'\n  });\n  return {\n    html\n  };\n}\nexport async function scheduleReport(_ref2) {\n  let {\n      templateId,\n      dataFilters\n    } = _ref2,\n    body = _objectWithoutPropertiesLoose(_ref2, _excluded2);\n  return Post(`${urls.reports.service.v2}/${templateId}/tenant-reports`, _extends({}, body, {\n    dataFilters: btoa(JSON.stringify(dataFilters || {}))\n  }));\n}\nexport async function downloadReport(_ref3) {\n  let {\n      dataFilters\n    } = _ref3,\n    body = _objectWithoutPropertiesLoose(_ref3, _excluded3);\n  const blob = await Get(`${urls.reports.trigger.v1}/preview-report`, _extends({}, body, {\n    dataFilters: btoa(JSON.stringify(dataFilters || {}))\n  }), {\n    responseType: 'blob'\n  });\n  let contentType = 'text/html';\n  let contentExt = 'html';\n  if (body.responseType === 'pdf') {\n    contentType = 'application/pdf';\n    contentExt = 'pdf';\n  } else if (body.responseType === 'image') {\n    contentType = 'image/jpeg';\n    contentExt = 'jpg';\n  }\n  const newBlob = new Blob([blob], {\n    type: contentType\n  });\n  const fileURL = URL.createObjectURL(newBlob);\n  const tempLink = document.createElement('a');\n  tempLink.href = fileURL;\n  tempLink.setAttribute('download', `report_${body.name || ''}.${contentExt}`);\n  tempLink.click();\n  setTimeout(tempLink.remove.bind(tempLink));\n}\nexport async function sendReport(body) {\n  return Post(`${urls.reports.trigger.v1}/tenant-reports`, body);\n}","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","_excluded","_excluded2","_excluded3","Get","Post","urls","getReports","body","reports","service","v2","getReport","id","renderReport","_ref","dataFilters","html","trigger","v1","btoa","JSON","stringify","responseType","scheduleReport","_ref2","templateId","downloadReport","_ref3","blob","contentType","contentExt","newBlob","Blob","type","fileURL","URL","createObjectURL","tempLink","document","createElement","href","setAttribute","name","click","setTimeout","remove","bind","sendReport"],"sources":["/Users/morank/Documents/my-app/node_modules/@frontegg/rest-api/reports/index.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nconst _excluded = [\"dataFilters\"],\n      _excluded2 = [\"templateId\", \"dataFilters\"],\n      _excluded3 = [\"dataFilters\"];\nimport { Get, Post } from '../fetch';\nimport { urls } from '../constants';\nexport async function getReports(body) {\n  return Get(`${urls.reports.service.v2}/tenant-reports`, body);\n}\nexport async function getReport(body) {\n  return Get(`${urls.reports.service.v2}/${body.id}/tenant-reports`);\n}\nexport async function renderReport(_ref) {\n  let {\n    dataFilters\n  } = _ref,\n      body = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  const html = await Get(`${urls.reports.trigger.v1}/preview-report`, _extends({}, body, {\n    dataFilters: btoa(JSON.stringify(dataFilters || {})),\n    responseType: 'html'\n  }), {\n    responseType: 'plain'\n  });\n  return {\n    html\n  };\n}\nexport async function scheduleReport(_ref2) {\n  let {\n    templateId,\n    dataFilters\n  } = _ref2,\n      body = _objectWithoutPropertiesLoose(_ref2, _excluded2);\n\n  return Post(`${urls.reports.service.v2}/${templateId}/tenant-reports`, _extends({}, body, {\n    dataFilters: btoa(JSON.stringify(dataFilters || {}))\n  }));\n}\nexport async function downloadReport(_ref3) {\n  let {\n    dataFilters\n  } = _ref3,\n      body = _objectWithoutPropertiesLoose(_ref3, _excluded3);\n\n  const blob = await Get(`${urls.reports.trigger.v1}/preview-report`, _extends({}, body, {\n    dataFilters: btoa(JSON.stringify(dataFilters || {}))\n  }), {\n    responseType: 'blob'\n  });\n  let contentType = 'text/html';\n  let contentExt = 'html';\n\n  if (body.responseType === 'pdf') {\n    contentType = 'application/pdf';\n    contentExt = 'pdf';\n  } else if (body.responseType === 'image') {\n    contentType = 'image/jpeg';\n    contentExt = 'jpg';\n  }\n\n  const newBlob = new Blob([blob], {\n    type: contentType\n  });\n  const fileURL = URL.createObjectURL(newBlob);\n  const tempLink = document.createElement('a');\n  tempLink.href = fileURL;\n  tempLink.setAttribute('download', `report_${body.name || ''}.${contentExt}`);\n  tempLink.click();\n  setTimeout(tempLink.remove.bind(tempLink));\n}\nexport async function sendReport(body) {\n  return Post(`${urls.reports.trigger.v1}/tenant-reports`, body);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}