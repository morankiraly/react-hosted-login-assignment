{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { createFronteggStore } from '@frontegg/redux-store';\nimport { Metadata } from '@frontegg/types';\nimport { FronteggApp } from '../FronteggApp';\nimport { waitThemeSetter } from '../utils';\nvar defaultTheme = 'modern';\nexport { defaultTheme };\nexport var getThemeByName = function getThemeByName(name) {\n  var _name;\n\n  // Load themes from window chunk to support cdn getThemeByName\n  var themes = window['FronteggAdminPortal'].themes;\n  return (_name = themes[name]) != null ? _name : themes[defaultTheme];\n};\nexport var LoginBoxRenderer = /*#__PURE__*/function () {\n  function LoginBoxRenderer(name, themeOptions, store, appOptions) {\n    _classCallCheck(this, LoginBoxRenderer);\n    this.app = void 0;\n    this.options = void 0;\n    this.store = void 0;\n    this.themeSetter = void 0;\n    this.setRoute = function () {};\n    this.themeOptions = {};\n    var contextOptions = {\n      baseUrl: 'preview'\n    };\n    this.store = store != null ? store : createFronteggStore({\n      context: contextOptions\n    }, this, true, undefined, undefined, true);\n    this.options = _extends({\n      themeOptions: themeOptions,\n      iframeRendering: true,\n      metadata: {},\n      previewMode: true,\n      builderMode: true,\n      store: this.store,\n      contextOptions: contextOptions,\n      onRedirectTo: function onRedirectTo() {\n        console.debug('path');\n      }\n    }, appOptions);\n    this.app = new FronteggApp(this.options, name, true);\n    Metadata.set({}, name);\n  }\n  _createClass(LoginBoxRenderer, [{\n    key: \"render\",\n    value: function () {\n      var _render = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(loginBoxContainer) {\n        var _this = this;\n        var loginBoxEl, setThemeSetter, setStaticRouteSetter, FronteggLoginBox;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                loginBoxEl = loginBoxContainer.querySelector('#root');\n                if (!loginBoxEl) {\n                  loginBoxEl = loginBoxContainer.ownerDocument.createElement('div');\n                  loginBoxEl.setAttribute('id', 'root');\n                  loginBoxContainer.appendChild(loginBoxEl);\n                }\n                this.app.loginBoxContainer = loginBoxContainer;\n                this.app.loginBoxEl = loginBoxEl;\n                setThemeSetter = function setThemeSetter(themeSetter) {\n                  _this.themeSetter = themeSetter;\n                };\n                setStaticRouteSetter = function setStaticRouteSetter(setStaticRoute) {\n                  _this.setRoute = setStaticRoute;\n                };\n                _context.next = 8;\n                return this.app.loadScript('FronteggLoginBox');\n              case 8:\n                FronteggLoginBox = _context.sent;\n                this.app.loginBoxRenderer = FronteggLoginBox.renderPage(loginBoxEl, {\n                  options: this.options,\n                  injector: this.app,\n                  setThemeSetter: setThemeSetter,\n                  setStaticRouteSetter: setStaticRouteSetter,\n                  staticRoute: '/account/login'\n                });\n                _context.next = 12;\n                return waitThemeSetter(this);\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function render(_x) {\n        return _render.apply(this, arguments);\n      }\n      return render;\n    }()\n  }, {\n    key: \"unmount\",\n    value: function unmount() {\n      try {\n        var _this$app$loginBoxRen;\n        (_this$app$loginBoxRen = this.app.loginBoxRenderer) == null ? void 0 : _this$app$loginBoxRen.unmount();\n      } catch (e) {\n        console.error('Failed to unmount login box renderer', e);\n      }\n    }\n  }, {\n    key: \"setTheme\",\n    value: function setTheme(themeOptions) {\n      var _this$themeSetter;\n      this.themeOptions = themeOptions;\n      if (!this.themeSetter) {\n        console.warn('this.themeSetter is not defined yet');\n      }\n      (_this$themeSetter = this.themeSetter) == null ? void 0 : _this$themeSetter.call(this, this.themeOptions);\n    }\n  }, {\n    key: \"setStaticRoute\",\n    value: function setStaticRoute(staticRoute) {\n      var _this$setRoute;\n      if (!this.setRoute) {\n        console.warn('this.setRoute is not defined yet');\n      }\n      (_this$setRoute = this.setRoute) == null ? void 0 : _this$setRoute.call(this, staticRoute);\n    }\n  }, {\n    key: \"setStore\",\n    value: function setStore(state) {\n      this.store.dispatch({\n        type: 'auth/setState',\n        payload: state\n      });\n    }\n  }]);\n  return LoginBoxRenderer;\n}();\nexport default LoginBoxRenderer;","map":{"version":3,"names":["_asyncToGenerator","_extends","_classCallCheck","_createClass","_regeneratorRuntime","createFronteggStore","Metadata","FronteggApp","waitThemeSetter","defaultTheme","getThemeByName","name","_name","themes","window","LoginBoxRenderer","themeOptions","store","appOptions","app","options","themeSetter","setRoute","contextOptions","baseUrl","context","undefined","iframeRendering","metadata","previewMode","builderMode","onRedirectTo","console","debug","set","key","value","_render","mark","_callee","loginBoxContainer","_this","loginBoxEl","setThemeSetter","setStaticRouteSetter","FronteggLoginBox","wrap","_callee$","_context","prev","next","querySelector","ownerDocument","createElement","setAttribute","appendChild","setStaticRoute","loadScript","sent","loginBoxRenderer","renderPage","injector","staticRoute","stop","render","_x","apply","arguments","unmount","_this$app$loginBoxRen","e","error","setTheme","_this$themeSetter","warn","call","_this$setRoute","setStore","state","dispatch","type","payload"],"sources":["/Users/sagiittah/Downloads/my-app/node_modules/@frontegg/js/LoginBoxRenderer/index.js"],"sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { createFronteggStore } from '@frontegg/redux-store';\nimport { Metadata } from '@frontegg/types';\nimport { FronteggApp } from '../FronteggApp';\nimport { waitThemeSetter } from '../utils';\nvar defaultTheme = 'modern';\nexport { defaultTheme };\nexport var getThemeByName = function getThemeByName(name) {\n  var _name;\n\n  // Load themes from window chunk to support cdn getThemeByName\n  var themes = window['FronteggAdminPortal'].themes;\n  return (_name = themes[name]) != null ? _name : themes[defaultTheme];\n};\nexport var LoginBoxRenderer = /*#__PURE__*/function () {\n  function LoginBoxRenderer(name, themeOptions, store, appOptions) {\n    _classCallCheck(this, LoginBoxRenderer);\n\n    this.app = void 0;\n    this.options = void 0;\n    this.store = void 0;\n    this.themeSetter = void 0;\n\n    this.setRoute = function () {};\n\n    this.themeOptions = {};\n    var contextOptions = {\n      baseUrl: 'preview'\n    };\n    this.store = store != null ? store : createFronteggStore({\n      context: contextOptions\n    }, this, true, undefined, undefined, true);\n    this.options = _extends({\n      themeOptions: themeOptions,\n      iframeRendering: true,\n      metadata: {},\n      previewMode: true,\n      builderMode: true,\n      store: this.store,\n      contextOptions: contextOptions,\n      onRedirectTo: function onRedirectTo() {\n        console.debug('path');\n      }\n    }, appOptions);\n    this.app = new FronteggApp(this.options, name, true);\n    Metadata.set({}, name);\n  }\n\n  _createClass(LoginBoxRenderer, [{\n    key: \"render\",\n    value: function () {\n      var _render = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(loginBoxContainer) {\n        var _this = this;\n\n        var loginBoxEl, setThemeSetter, setStaticRouteSetter, FronteggLoginBox;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                loginBoxEl = loginBoxContainer.querySelector('#root');\n\n                if (!loginBoxEl) {\n                  loginBoxEl = loginBoxContainer.ownerDocument.createElement('div');\n                  loginBoxEl.setAttribute('id', 'root');\n                  loginBoxContainer.appendChild(loginBoxEl);\n                }\n\n                this.app.loginBoxContainer = loginBoxContainer;\n                this.app.loginBoxEl = loginBoxEl;\n\n                setThemeSetter = function setThemeSetter(themeSetter) {\n                  _this.themeSetter = themeSetter;\n                };\n\n                setStaticRouteSetter = function setStaticRouteSetter(setStaticRoute) {\n                  _this.setRoute = setStaticRoute;\n                };\n\n                _context.next = 8;\n                return this.app.loadScript('FronteggLoginBox');\n\n              case 8:\n                FronteggLoginBox = _context.sent;\n                this.app.loginBoxRenderer = FronteggLoginBox.renderPage(loginBoxEl, {\n                  options: this.options,\n                  injector: this.app,\n                  setThemeSetter: setThemeSetter,\n                  setStaticRouteSetter: setStaticRouteSetter,\n                  staticRoute: '/account/login'\n                });\n                _context.next = 12;\n                return waitThemeSetter(this);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function render(_x) {\n        return _render.apply(this, arguments);\n      }\n\n      return render;\n    }()\n  }, {\n    key: \"unmount\",\n    value: function unmount() {\n      try {\n        var _this$app$loginBoxRen;\n\n        (_this$app$loginBoxRen = this.app.loginBoxRenderer) == null ? void 0 : _this$app$loginBoxRen.unmount();\n      } catch (e) {\n        console.error('Failed to unmount login box renderer', e);\n      }\n    }\n  }, {\n    key: \"setTheme\",\n    value: function setTheme(themeOptions) {\n      var _this$themeSetter;\n\n      this.themeOptions = themeOptions;\n\n      if (!this.themeSetter) {\n        console.warn('this.themeSetter is not defined yet');\n      }\n\n      (_this$themeSetter = this.themeSetter) == null ? void 0 : _this$themeSetter.call(this, this.themeOptions);\n    }\n  }, {\n    key: \"setStaticRoute\",\n    value: function setStaticRoute(staticRoute) {\n      var _this$setRoute;\n\n      if (!this.setRoute) {\n        console.warn('this.setRoute is not defined yet');\n      }\n\n      (_this$setRoute = this.setRoute) == null ? void 0 : _this$setRoute.call(this, staticRoute);\n    }\n  }, {\n    key: \"setStore\",\n    value: function setStore(state) {\n      this.store.dispatch({\n        type: 'auth/setState',\n        payload: state\n      });\n    }\n  }]);\n\n  return LoginBoxRenderer;\n}();\nexport default LoginBoxRenderer;"],"mappings":"AAAA,OAAOA,iBAAiB,MAAM,6CAA6C;AAC3E,OAAOC,QAAQ,MAAM,oCAAoC;AACzD,OAAOC,eAAe,MAAM,2CAA2C;AACvE,OAAOC,YAAY,MAAM,wCAAwC;AACjE,OAAOC,mBAAmB,MAAM,4BAA4B;AAC5D,SAASC,mBAAmB,QAAQ,uBAAuB;AAC3D,SAASC,QAAQ,QAAQ,iBAAiB;AAC1C,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,eAAe,QAAQ,UAAU;AAC1C,IAAIC,YAAY,GAAG,QAAQ;AAC3B,SAASA,YAAY;AACrB,OAAO,IAAIC,cAAc,GAAG,SAASA,cAAc,CAACC,IAAI,EAAE;EACxD,IAAIC,KAAK;;EAET;EACA,IAAIC,MAAM,GAAGC,MAAM,CAAC,qBAAqB,CAAC,CAACD,MAAM;EACjD,OAAO,CAACD,KAAK,GAAGC,MAAM,CAACF,IAAI,CAAC,KAAK,IAAI,GAAGC,KAAK,GAAGC,MAAM,CAACJ,YAAY,CAAC;AACtE,CAAC;AACD,OAAO,IAAIM,gBAAgB,GAAG,aAAa,YAAY;EACrD,SAASA,gBAAgB,CAACJ,IAAI,EAAEK,YAAY,EAAEC,KAAK,EAAEC,UAAU,EAAE;IAC/DhB,eAAe,CAAC,IAAI,EAAEa,gBAAgB,CAAC;IAEvC,IAAI,CAACI,GAAG,GAAG,KAAK,CAAC;IACjB,IAAI,CAACC,OAAO,GAAG,KAAK,CAAC;IACrB,IAAI,CAACH,KAAK,GAAG,KAAK,CAAC;IACnB,IAAI,CAACI,WAAW,GAAG,KAAK,CAAC;IAEzB,IAAI,CAACC,QAAQ,GAAG,YAAY,CAAC,CAAC;IAE9B,IAAI,CAACN,YAAY,GAAG,CAAC,CAAC;IACtB,IAAIO,cAAc,GAAG;MACnBC,OAAO,EAAE;IACX,CAAC;IACD,IAAI,CAACP,KAAK,GAAGA,KAAK,IAAI,IAAI,GAAGA,KAAK,GAAGZ,mBAAmB,CAAC;MACvDoB,OAAO,EAAEF;IACX,CAAC,EAAE,IAAI,EAAE,IAAI,EAAEG,SAAS,EAAEA,SAAS,EAAE,IAAI,CAAC;IAC1C,IAAI,CAACN,OAAO,GAAGnB,QAAQ,CAAC;MACtBe,YAAY,EAAEA,YAAY;MAC1BW,eAAe,EAAE,IAAI;MACrBC,QAAQ,EAAE,CAAC,CAAC;MACZC,WAAW,EAAE,IAAI;MACjBC,WAAW,EAAE,IAAI;MACjBb,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBM,cAAc,EAAEA,cAAc;MAC9BQ,YAAY,EAAE,SAASA,YAAY,GAAG;QACpCC,OAAO,CAACC,KAAK,CAAC,MAAM,CAAC;MACvB;IACF,CAAC,EAAEf,UAAU,CAAC;IACd,IAAI,CAACC,GAAG,GAAG,IAAIZ,WAAW,CAAC,IAAI,CAACa,OAAO,EAAET,IAAI,EAAE,IAAI,CAAC;IACpDL,QAAQ,CAAC4B,GAAG,CAAC,CAAC,CAAC,EAAEvB,IAAI,CAAC;EACxB;EAEAR,YAAY,CAACY,gBAAgB,EAAE,CAAC;IAC9BoB,GAAG,EAAE,QAAQ;IACbC,KAAK,EAAE,YAAY;MACjB,IAAIC,OAAO,GAAGrC,iBAAiB,EAAE,aAAaI,mBAAmB,CAACkC,IAAI,CAAC,SAASC,OAAO,CAACC,iBAAiB,EAAE;QACzG,IAAIC,KAAK,GAAG,IAAI;QAEhB,IAAIC,UAAU,EAAEC,cAAc,EAAEC,oBAAoB,EAAEC,gBAAgB;QACtE,OAAOzC,mBAAmB,CAAC0C,IAAI,CAAC,SAASC,QAAQ,CAACC,QAAQ,EAAE;UAC1D,OAAO,CAAC,EAAE;YACR,QAAQA,QAAQ,CAACC,IAAI,GAAGD,QAAQ,CAACE,IAAI;cACnC,KAAK,CAAC;gBACJR,UAAU,GAAGF,iBAAiB,CAACW,aAAa,CAAC,OAAO,CAAC;gBAErD,IAAI,CAACT,UAAU,EAAE;kBACfA,UAAU,GAAGF,iBAAiB,CAACY,aAAa,CAACC,aAAa,CAAC,KAAK,CAAC;kBACjEX,UAAU,CAACY,YAAY,CAAC,IAAI,EAAE,MAAM,CAAC;kBACrCd,iBAAiB,CAACe,WAAW,CAACb,UAAU,CAAC;gBAC3C;gBAEA,IAAI,CAACvB,GAAG,CAACqB,iBAAiB,GAAGA,iBAAiB;gBAC9C,IAAI,CAACrB,GAAG,CAACuB,UAAU,GAAGA,UAAU;gBAEhCC,cAAc,GAAG,SAASA,cAAc,CAACtB,WAAW,EAAE;kBACpDoB,KAAK,CAACpB,WAAW,GAAGA,WAAW;gBACjC,CAAC;gBAEDuB,oBAAoB,GAAG,SAASA,oBAAoB,CAACY,cAAc,EAAE;kBACnEf,KAAK,CAACnB,QAAQ,GAAGkC,cAAc;gBACjC,CAAC;gBAEDR,QAAQ,CAACE,IAAI,GAAG,CAAC;gBACjB,OAAO,IAAI,CAAC/B,GAAG,CAACsC,UAAU,CAAC,kBAAkB,CAAC;cAEhD,KAAK,CAAC;gBACJZ,gBAAgB,GAAGG,QAAQ,CAACU,IAAI;gBAChC,IAAI,CAACvC,GAAG,CAACwC,gBAAgB,GAAGd,gBAAgB,CAACe,UAAU,CAAClB,UAAU,EAAE;kBAClEtB,OAAO,EAAE,IAAI,CAACA,OAAO;kBACrByC,QAAQ,EAAE,IAAI,CAAC1C,GAAG;kBAClBwB,cAAc,EAAEA,cAAc;kBAC9BC,oBAAoB,EAAEA,oBAAoB;kBAC1CkB,WAAW,EAAE;gBACf,CAAC,CAAC;gBACFd,QAAQ,CAACE,IAAI,GAAG,EAAE;gBAClB,OAAO1C,eAAe,CAAC,IAAI,CAAC;cAE9B,KAAK,EAAE;cACP,KAAK,KAAK;gBACR,OAAOwC,QAAQ,CAACe,IAAI,EAAE;YAAC;UAE7B;QACF,CAAC,EAAExB,OAAO,EAAE,IAAI,CAAC;MACnB,CAAC,CAAC,CAAC;MAEH,SAASyB,MAAM,CAACC,EAAE,EAAE;QAClB,OAAO5B,OAAO,CAAC6B,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;MACvC;MAEA,OAAOH,MAAM;IACf,CAAC;EACH,CAAC,EAAE;IACD7B,GAAG,EAAE,SAAS;IACdC,KAAK,EAAE,SAASgC,OAAO,GAAG;MACxB,IAAI;QACF,IAAIC,qBAAqB;QAEzB,CAACA,qBAAqB,GAAG,IAAI,CAAClD,GAAG,CAACwC,gBAAgB,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGU,qBAAqB,CAACD,OAAO,EAAE;MACxG,CAAC,CAAC,OAAOE,CAAC,EAAE;QACVtC,OAAO,CAACuC,KAAK,CAAC,sCAAsC,EAAED,CAAC,CAAC;MAC1D;IACF;EACF,CAAC,EAAE;IACDnC,GAAG,EAAE,UAAU;IACfC,KAAK,EAAE,SAASoC,QAAQ,CAACxD,YAAY,EAAE;MACrC,IAAIyD,iBAAiB;MAErB,IAAI,CAACzD,YAAY,GAAGA,YAAY;MAEhC,IAAI,CAAC,IAAI,CAACK,WAAW,EAAE;QACrBW,OAAO,CAAC0C,IAAI,CAAC,qCAAqC,CAAC;MACrD;MAEA,CAACD,iBAAiB,GAAG,IAAI,CAACpD,WAAW,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGoD,iBAAiB,CAACE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC3D,YAAY,CAAC;IAC3G;EACF,CAAC,EAAE;IACDmB,GAAG,EAAE,gBAAgB;IACrBC,KAAK,EAAE,SAASoB,cAAc,CAACM,WAAW,EAAE;MAC1C,IAAIc,cAAc;MAElB,IAAI,CAAC,IAAI,CAACtD,QAAQ,EAAE;QAClBU,OAAO,CAAC0C,IAAI,CAAC,kCAAkC,CAAC;MAClD;MAEA,CAACE,cAAc,GAAG,IAAI,CAACtD,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGsD,cAAc,CAACD,IAAI,CAAC,IAAI,EAAEb,WAAW,CAAC;IAC5F;EACF,CAAC,EAAE;IACD3B,GAAG,EAAE,UAAU;IACfC,KAAK,EAAE,SAASyC,QAAQ,CAACC,KAAK,EAAE;MAC9B,IAAI,CAAC7D,KAAK,CAAC8D,QAAQ,CAAC;QAClBC,IAAI,EAAE,eAAe;QACrBC,OAAO,EAAEH;MACX,CAAC,CAAC;IACJ;EACF,CAAC,CAAC,CAAC;EAEH,OAAO/D,gBAAgB;AACzB,CAAC,EAAE;AACH,eAAeA,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}